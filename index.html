<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FUJI-HAYA Memory Game</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            background: url('images/electric.webp') no-repeat center center / cover;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: linear-gradient(135deg, rgba(101, 137, 249, 0.95), rgba(52, 86, 200, 0.95));
            padding: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border-bottom: 3px solid #fff;
        }

        .header-content {
            max-width: 960px;
            margin: 0 auto;
            text-align: center;
            padding: 0 20px;
        }

        .header-content img {
            width: 100%;
            max-width: 350px;
            height: auto;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        main {
            flex: 1;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #score-timer {
            display: flex;
            justify-content: space-between;
            max-width: 1100px;
            width: 100%;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.5));
            padding: 20px 40px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(101, 137, 249, 0.5);
        }

        #score-timer>div {
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        #game {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            width: 100%;
            position: relative;
        }

        .grid {
            max-width: 1100px;
            width: 100%;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(6, 150px);
            gap: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            justify-content: center;
        }

        .card {
            position: relative;
            transition: transform .3s ease;
            transform-style: preserve-3d;
            background-color: transparent !important;
            cursor: pointer;
            height: 150px;
            width: 150px;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .back,
        .front {
            position: absolute;
            backface-visibility: hidden;
            border-radius: 10px;
            height: 100%;
            width: 100%;
            pointer-events: none;
        }

        .front {
            background: transparent url('images/question.png') no-repeat center center / contain;
        }

        .back {
            transform: rotateY(180deg);
            background-color: transparent !important;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center center;
        }

        .selected {
            transform: rotateY(180deg) !important;
        }

        .match .front {
            background: transparent !important;
        }

        .match {
            transform: rotateY(180deg) !important;
        }

        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
        }

        footer {
            background: linear-gradient(135deg, rgba(52, 86, 200, 0.95), rgba(101, 137, 249, 0.95));
            color: white;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
            border-top: 3px solid #fff;
        }

        footer p {
            margin: 5px 0;
            font-size: 1rem;
        }

        footer .footer-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        footer .footer-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .game-over-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-over-content {
            background: linear-gradient(135deg, #ffffff, #f0f4ff);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            border: 3px solid #6589F9;
        }

        .game-over-content h2 {
            color: #6589F9;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .game-over-content p {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 30px;
        }

        .game-over-content button {
            font-size: 1.2rem;
            padding: 10px 30px;
        }

        .modal-content {
            background-color: rgb(218, 232, 250);
            border-radius: 30px;
            border: 3px solid #6589F9;
        }

        .modal-dialog {
            max-width: 650px;
            width: 90%;
            margin: 1.75rem auto;
        }

        /* Tablet devices (iPad, landscape phones) */
        @media (max-width: 1024px) {
            .grid {
                grid-template-columns: repeat(6, 120px);
                gap: 8px;
                padding: 15px;
            }

            .card {
                height: 120px;
                width: 120px;
            }

            #score-timer>div {
                font-size: 2rem;
            }
        }

        /* Mobile landscape and small tablets */
        @media (max-width: 768px) {
            #score-timer {
                flex-direction: column;
                gap: 10px;
                padding: 15px 20px;
            }

            #score-timer>div {
                font-size: 1.8rem;
            }

            .header-content img {
                max-width: 250px;
            }

            footer .footer-title {
                font-size: 1.2rem;
            }

            .grid {
                grid-template-columns: repeat(4, 150px);
                gap: 10px;
            }

            .card {
                height: 150px;
                width: 150px;
            }

            .game-over-content h2 {
                font-size: 2rem;
            }

            .game-over-content p {
                font-size: 1.2rem;
            }
        }

        /* Mobile devices */
        @media (max-width: 640px) {
            main {
                padding: 20px 10px;
            }

            #score-timer {
                margin-bottom: 20px;
                padding: 12px 15px;
            }

            #score-timer>div {
                font-size: 1.5rem;
            }

            .grid {
                grid-template-columns: repeat(3, 150px);
                gap: 8px;
                padding: 12px;
            }

            .card {
                height: 150px;
                width: 150px;
            }
        }

        /* Very small mobile devices */
        @media (max-width: 480px) {
            .header-content img {
                max-width: 200px;
            }

            #score-timer>div {
                font-size: 1.3rem;
            }

            .grid {
                grid-template-columns: repeat(3, 100px);
                gap: 6px;
                padding: 10px;
            }

            .card {
                height: 100px;
                width: 100px;
            }

            .game-over-content {
                padding: 30px 20px;
            }

            .game-over-content h2 {
                font-size: 1.5rem;
            }

            .game-over-content p {
                font-size: 1rem;
            }

            .game-over-content button {
                font-size: 1rem;
                padding: 8px 20px;
            }

            footer {
                padding: 15px 10px;
            }

            footer .footer-title {
                font-size: 1rem;
            }

            footer p {
                font-size: 0.85rem;
            }

            .modal-body {
                font-size: 16px !important;
            }
        }
    </style>
</head>

<body>
    <canvas id="confetti-canvas"></canvas>

    <header>
        <div class="header-content">
            <img src="assets/FUJI-HAYA LOGO [2.5k pix].png" alt="FUJI-HAYA LOGO">
        </div>
    </header>

    <main>
        <div id="score-timer">
            <div id="score">Score: 0</div>
            <div id="timer">Time: 60</div>
        </div>

        <div id="gameOverOverlay" class="game-over-overlay">
            <div class="game-over-content">
                <h2 id="gameOverTitle">‚è∞ Time's Up!</h2>
                <p id="finalScore">Your Score: 0</p>
                <button class="btn btn-primary btn-lg" onclick="location.reload()">Play Again</button>
            </div>
        </div>

        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle"
                            style="font-size: 25px; font-family: 'Games', sans-serif;">Game Instructions üéÆ</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="font-size: 20px; line-height: 1.6; color: #333;">
                        <ul style="list-style-type: none; padding: 0;">
                            <li style="margin-bottom: 15px;">1. <strong>Match the Pairs</strong> - Find the identical
                                cards to score points! üÉè</li>
                            <li style="margin-bottom: 15px;">2. <strong>Stay Sharp</strong> - Your memory is your
                                superpower! üß†</li>
                            <li style="margin-bottom: 15px;">3. <strong>Flip Fast</strong> - The quicker you match, the
                                higher your score! ‚ö°</li>
                            <li style="margin-bottom: 15px;">4. <strong>Beat the Clock</strong> - Race against time for
                                bonus rewards! ‚è±Ô∏è</li>
                            <li>5. <strong>Have Fun</strong> - Challenge yourself and enjoy the brain workout! üòÑ</li>
                            <br>
                            <li>Ready to test your memory? Let's go! üéâ</li>
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary btn-lg" data-dismiss="modal" id="startButton">Got
                            it!</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="game"></div>
    </main>

    <footer>
        <div class="footer-title">FUJI-HAYA ELECTRIC</div>
        <p class="footer-subtitle">Challenge Your Memory ‚Ä¢ Sharpen Your Mind ‚Ä¢ Have Fun!</p>
        <p>&copy; FUJI-HAYA Electric Corp. of the Phils.</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <script>
        'use strict';

        // Confetti Setup
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let confettiPieces = [];

        function Confetti() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height - canvas.height;
            this.size = Math.random() * 8 + 5;
            this.speedY = Math.random() * 3 + 2;
            this.speedX = Math.random() * 2 - 1;
            this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
            this.rotation = Math.random() * 360;
            this.rotationSpeed = Math.random() * 10 - 5;
        }

        Confetti.prototype.update = function () {
            this.y += this.speedY;
            this.x += this.speedX;
            this.rotation += this.rotationSpeed;
            if (this.y > canvas.height) {
                this.y = -10;
                this.x = Math.random() * canvas.width;
            }
        };

        Confetti.prototype.draw = function () {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.rotation * Math.PI / 180);
            ctx.fillStyle = this.color;
            ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
            ctx.restore();
        };

        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                confettiPieces.push(new Confetti());
            }
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            confettiPieces.forEach((piece, index) => {
                piece.update();
                piece.draw();
                if (confettiPieces.length > 100 && piece.y > canvas.height) {
                    confettiPieces.splice(index, 1);
                }
            });
            if (confettiPieces.length > 0) {
                requestAnimationFrame(animateConfetti);
            }
        }

        function triggerConfetti() {
            createConfetti();
            animateConfetti();
            setTimeout(() => {
                confettiPieces = [];
            }, 3000);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Game Logic
        const cardsArray = [
            { 'name': '1', 'img': 'images/1.png' },
            { 'name': '2', 'img': 'images/2.png' },
            { 'name': '3', 'img': 'images/3.png' },
            { 'name': '4', 'img': 'images/4.png' },
            { 'name': '5', 'img': 'images/5.png' },
            { 'name': '6', 'img': 'images/6.png' },
            { 'name': '7', 'img': 'images/7.png' },
            { 'name': '8', 'img': 'images/8.png' },
            { 'name': '9', 'img': 'images/9.png' },
            { 'name': '10', 'img': 'images/10.png' },
            { 'name': '11', 'img': 'images/11.png' },
            { 'name': '12', 'img': 'images/12.png' },
        ];

        var gameGrid = cardsArray.concat(cardsArray).sort(function () {
            return 0.5 - Math.random();
        });

        var firstGuess = '';
        var secondGuess = '';
        var count = 0;
        var previousTarget = null;
        var delay = 1200;
        var score = 0;
        var timer = 60;
        var timerInterval;
        var gameActive = false;
        var gameCompleted = false;

        var scoreDisplay = document.getElementById('score');
        scoreDisplay.textContent = 'Score: ' + score;

        var timerDisplay = document.getElementById('timer');
        timerDisplay.textContent = 'Time: ' + timer;

        function startTimer() {
            gameActive = true;
            timerInterval = setInterval(function () {
                timer--;
                timerDisplay.textContent = 'Time: ' + timer;
                if (timer <= 0) {
                    clearInterval(timerInterval);
                    gameActive = false;
                    endGame(false);
                }
            }, 1000);
        }

        function endGame(completed) {
            gameCompleted = completed;

            const gameOverTitle = document.getElementById('gameOverTitle');
            const finalScore = document.getElementById('finalScore');

            if (completed) {
                gameOverTitle.innerHTML = 'üéâ Congratulations!';
                gameOverTitle.textContent = 'üéâ Congratulations!';
                finalScore.textContent = 'You completed the game with ' + score + ' matches within the time!';
            } else {
                gameOverTitle.innerHTML = '‚è∞ Time\'s Up!';
                gameOverTitle.textContent = '‚è∞ Time\'s Up!';
                finalScore.textContent = 'Your Score: ' + score;
            }

            document.getElementById('gameOverOverlay').style.display = 'flex';
        }

        $(document).ready(function () {
            $('#exampleModalCenter').modal('show');
        });

        document.getElementById('startButton').addEventListener('click', function () {
            startTimer();
        });

        var game = document.getElementById('game');
        var grid = document.createElement('section');
        grid.setAttribute('class', 'grid');
        game.appendChild(grid);

        gameGrid.forEach(function (item) {
            var name = item.name, img = item.img;
            var card = document.createElement('div');
            card.classList.add('card');
            card.dataset.name = name;

            var front = document.createElement('div');
            front.classList.add('front');

            var back = document.createElement('div');
            back.classList.add('back');
            back.style.backgroundImage = 'url(' + img + ')';

            grid.appendChild(card);
            card.appendChild(front);
            card.appendChild(back);
        });

        var match = function match() {
            var selected = document.querySelectorAll('.selected');
            selected.forEach(function (card) {
                card.classList.add('match');
            });
            score++;
            scoreDisplay.textContent = 'Score: ' + score;
            triggerConfetti();

            // Check if all pairs are matched (12 pairs total)
            if (score === 12) {
                clearInterval(timerInterval);
                gameActive = false;
                setTimeout(function () {
                    endGame(true);
                }, 1000);
            }
        };

        var resetGuesses = function resetGuesses() {
            firstGuess = '';
            secondGuess = '';
            count = 0;
            previousTarget = null;

            var selected = document.querySelectorAll('.selected');
            selected.forEach(function (card) {
                card.classList.remove('selected');
            });
        };

        grid.addEventListener('click', function (event) {
            if (!gameActive) return;

            var clicked = event.target;

            var card = clicked.classList.contains('card') ? clicked : clicked.parentNode;

            if (!card.classList.contains('card') ||
                card === previousTarget ||
                card.classList.contains('selected') ||
                card.classList.contains('match')) {
                return;
            }

            if (count < 2) {
                count++;
                if (count === 1) {
                    firstGuess = card.dataset.name;
                    card.classList.add('selected');
                    previousTarget = card;
                } else {
                    secondGuess = card.dataset.name;
                    card.classList.add('selected');
                    if (firstGuess === secondGuess) {
                        setTimeout(function () {
                            match();
                            resetGuesses();
                        }, 400);
                    } else {
                        setTimeout(resetGuesses, delay);
                    }
                }
            }
        });
    </script>
</body>

</html>
